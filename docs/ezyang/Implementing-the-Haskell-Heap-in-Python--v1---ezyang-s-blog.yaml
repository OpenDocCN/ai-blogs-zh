- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-07-01 18:17:53'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: 'Implementing the Haskell Heap in Python, v1 : ezyang’s blog'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[http://blog.ezyang.com/2011/04/implementing-the-haskell-heap-in-python-v1/](http://blog.ezyang.com/2011/04/implementing-the-haskell-heap-in-python-v1/)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Here is a simple implementation of all of the parts of the Haskell heap we have
    discussed up until now, ghosts and all.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '*Technical notes.* You can already see some resemblance of the ghosts’ Python
    implementations and the actual Core GHC might spit out. Here’s an sample for pseq:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'The case operation on x corresponds to opening x, and once it’s open we do
    an indirection to y (`return heap[''y''].open()`). Here’s another example for
    the non-polymorphic adding ghost:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: In this case, `Box` plays the role of `GHC.Types.I#`. See if you can come up
    with some of the other correspondences (What is pattern matching on `bx` and `by`?
    What is `GHC.Prim.+#` ?)
  prefs: []
  type: TYPE_NORMAL
- en: I might do the next version in C just for kicks (and because then it would actually
    look something like what a real heap in a Haskell program looks like.)
  prefs: []
  type: TYPE_NORMAL
- en: 'Last time: [IO evaluates the Haskell Heap](http://blog.ezyang.com/2011/04/io-evaluates-the-haskell-heap/)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Next time: [Functions produce the Haskell Heap](http://blog.ezyang.com/2011/04/functions-produce-the-haskell-heap/)'
  prefs: []
  type: TYPE_NORMAL
- en: This work is licensed under a [Creative Commons Attribution-ShareAlike 3.0 Unported
    License](http://creativecommons.org/licenses/by-sa/3.0/).
  prefs: []
  type: TYPE_NORMAL
