["```\nstatic jmp_buf hs_readline_jmp_buf;\nstatic struct sigaction old_sigpipe_action;\n\nvoid hs_readline_sigaction (int signo, siginfo_t *info, void *data)\n{\n    sigaction(SIGALRM, &old_sigpipe_action, NULL);\n    siglongjmp(hs_readline_jmp_buf, signo);\n}\n\nchar *hs_readline (const char *s)\n{\n    struct sigaction action;\n    int signo;\n    sigset_t mask;\n    memset(&action, 0, sizeof(struct sigaction));\n    sigemptyset(&mask);\n    sigaddset(&mask, SIGALRM);\n    action.sa_sigaction = hs_readline_sigaction;\n    action.sa_mask = mask;\n    action.sa_flags = SA_RESETHAND;\n    sigaction(SIGALRM, &action, &old_sigpipe_action);\n    if (signo = sigsetjmp(hs_readline_jmp_buf, 1)) {\n        return NULL;\n    }\n    char *r = readline(s);\n    sigaction(SIGALRM, &old_sigpipe_action, NULL);\n    return r;\n}\n\n```"]